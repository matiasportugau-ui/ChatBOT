version: "3.1"

intents:
  - cotizar_producto
  - saludo
  - despedida
  - fallback
  - corregir
  - buscar_conocimiento

entities:
  - producto
  - sku
  - cantidad
  - email
  - telefono

slots:
  producto:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: cotizacion_form
            requested_slot: producto
  sku:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: cotizacion_form
            requested_slot: sku
  cantidad:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: cotizacion_form
            requested_slot: cantidad
  email:
    type: text
    mappings:
      - type: from_text
  telefono:
    type: text
    mappings:
      - type: from_text

forms:
  cotizacion_form:
    required_slots:
      - producto
      - sku
      - cantidad

responses:
  utter_ask_producto:
    - text: "¿Qué producto querés cotizar?"
  utter_ask_sku:
    - text: "¿Tenés SKU/variante? (si no, decime color/talla)"
  utter_ask_cantidad:
    - text: "¿Qué cantidad necesitás?"
  utter_submit:
    - text: "¡Gracias! Estoy registrando tu solicitud."
  utter_saludo:
    - text: "Hola, ¿cómo puedo ayudarte?"
  utter_despedida:
    - text: "Adiós, que tengas un buen día."
  utter_correccion_recibida:
    - text: "✅ Gracias por la corrección. La he guardado en la base de conocimiento."
  utter_pedir_correccion:
    - text: "Entiendo que algo está mal. ¿Podrías ser más específico sobre qué corregir?"

actions:
  - action_cotizar
  - action_register_quote
  - action_handle_correction
  - action_search_knowledge
